<!DOCTYPE html>
<html lang="es">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

</head>

<body>

    <div id="app">
        <main class="container">
            <div class="row">
                <div class="col-md-6">
                    <h1>Hay {{total}} persona/s</h1>

                    <aside>
                        intruducir persona
                    </aside>
                    <aside style="margin-bottom:20px;">
                        <input type="text" v-model="persona.nombres" value="Pedro">
                    </aside>
                    <aside>
                        introducir edad
                    </aside>
                    <aside style="margin-bottom:20px;">
                        <input type="text" v-model="persona.edad" value="20">
                    </aside>
                    <div class="form-group" style="margin-bottom:20px;">
                        <label>Sexo </label>
                        <input type="radio" name="genero" v-model="persona.sexo" value="M" checked> Masculino
                        <input type="radio" name="genero" v-model="persona.sexo" value="F"> Femenino
                    </div>


                    <button @click="agregar()">Agregar</button>
                </div>
                <div class="col-md-6">

                    <table class="table">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Nombre</th>
                                <th scope="col">Edad</th>
                                <th scope="col">Sexo</th>
                                <th scope="col">Eliminar?</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="(persona, index) in personas_filtradas" :key="index">
                                <th scope="row">{{persona.id}}</th>
                                <td> {{ persona.nombre }} </td>
                                <td> {{ persona.edad }} </td>
                                <td> {{ persona.sexo }} </td>
                                <td style="padding-right: 80px"> <button type="button" class="close" @click="borrarPersona(persona.id)"
                                        aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </td>
                            </tr>

                        </tbody>
                    </table>


                    <label for="filtro_sexo">Filtro sexo</label>
                    <select id="filtro_sexo" v-model="personas_filtro">

                        <option selected value="">Todos</option>
                        <option value="M">Masculino</option>
                        <option value="F">Femenino</option>
                    </select>
                    <aside style="padding-top: 1rem;">
                        <button class="" @click="filtrar_personas()">
                            buscar
                        </button>
                    </aside>
                    <button class="" @click="sortedArrayByName()">
                        ordenar por nombre
                    </button>
                    <button class="" @click="sortedArrayById()">
                            ordenar por id
                        </button>

                </div>
            </div>
        </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        new Vue({
            el: "#app",
            data: {
                idInicial: 1,
                personas: [{
                    id: 0,
                    nombre: "franco",
                    edad: "29",
                    sexo: "M"

                }
                ],
                personas_filtradas: [{
                    id: 0,
                    nombre: "franco",
                    edad: "29",
                    sexo: "M"

                }],
                personas_filtro: '',
                persona: {
                    nombre: "",
                    edad: "",
                    sexo: "M"
                }
            },
            computed: {
                total() {
                    return this.personas_filtradas.length;
                }

            },
            methods: {
                agregar() {
                    this.personas.push({
                        id: this.idInicial++,
                        nombre: this.persona.nombres,
                        sexo: this.persona.sexo,
                        edad: this.persona.edad
                    });
                    this.persona.nombre = "";
                    this.persona.sexo = "M";
                    this.persona.edad = "";

                    this.filtrar_personas();

                },
                sortedArrayByName() {
                    function compare(a, b) {


                        if (a.nombre < b.nombre) {
                            return -1;
                        }
                        if (a.nombre > b.nombre) {

                            return 1;
                        }
                        return 0;
                    }
                    this.personas_filtradas.sort(compare);
                },
                sortedArrayById() {
                    function compare(a, b) {


                        if (a.id < b.id) {
                            return -1;
                        }
                        if (a.id > b.id) {

                            return 1;
                        }
                        return 0;
                    }
                    this.personas_filtradas.sort(compare);
                },

                borrarPersona(id) {
                    this.personas = this.personas.filter(persona => persona.id !== id);
                    this.personas_filtradas = this.personas_filtradas.filter(persona => persona.id !== id);
                },
                filtrar_personas() {
                    if (this.personas_filtro === '') {
                        this.personas_filtradas = this.personas;
                    } else {
                        this.personas_filtradas = this.personas.filter(persona => persona.sexo === this.personas_filtro);
                    }
                },
            }
        });
    </script>
</body>

</html>